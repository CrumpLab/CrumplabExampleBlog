{
  "hash": "ea1b56e123cc6cec31855b2ed14c31e6",
  "result": {
    "markdown": "---\ntitle: \"Data Tidying\"\nauthor: \"Matt Crump\"\n---\n\n\n\n\n## look at untidy data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nuntidy_data <- read_csv(\"data/untidy_data.csv\", show_col_types = FALSE)\n\nknitr::kable(untidy_data)\n```\n\n::: {.cell-output-display}\n| customer_id|itemsprice_2018 |itemsprice_2019 |itemsprice_2020 | totalprice_2018| totalprice_2019| totalprice_2020|\n|-----------:|:---------------|:---------------|:---------------|---------------:|---------------:|---------------:|\n|           1|2 (3.91)        |8 (4.72)        |10 (5.59)       |            7.82|           37.76|           55.90|\n|           2|1 (3.91)        |6 (4.72)        |1 (5.59)        |            3.91|           28.32|            5.59|\n|           3|4 (3.91)        |5 (4.72)        |5 (5.59)        |           15.64|           23.60|           27.95|\n|           4|10 (3.91)       |1 (4.72)        |3 (5.59)        |           39.10|            4.72|           16.77|\n|           5|3 (3.91)        |9 (4.72)        |8 (5.59)        |           11.73|           42.48|           44.72|\n:::\n:::\n\n\n\n## look at tidy data\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntidy_data <- read_csv(\"data/tidy_data.csv\", show_col_types = FALSE)\n\nknitr::kable(tidy_data)\n```\n\n::: {.cell-output-display}\n| customer_id| year| items| price_per_item| totalprice|\n|-----------:|----:|-----:|--------------:|----------:|\n|           1| 2018|     2|           3.91|       7.82|\n|           1| 2019|     8|           4.72|      37.76|\n|           1| 2020|    10|           5.59|      55.90|\n|           2| 2018|     1|           3.91|       3.91|\n|           2| 2019|     6|           4.72|      28.32|\n|           2| 2020|     1|           5.59|       5.59|\n|           3| 2018|     4|           3.91|      15.64|\n|           3| 2019|     5|           4.72|      23.60|\n|           3| 2020|     5|           5.59|      27.95|\n|           4| 2018|    10|           3.91|      39.10|\n|           4| 2019|     1|           4.72|       4.72|\n|           4| 2020|     3|           5.59|      16.77|\n|           5| 2018|     3|           3.91|      11.73|\n|           5| 2019|     9|           4.72|      42.48|\n|           5| 2020|     8|           5.59|      44.72|\n:::\n:::\n\n\n\n## convert messy to tidy\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntidy_data_2 <- read_csv(file = \"data/untidy_data.csv\",\n                      show_col_types = FALSE) %>%\n  pivot_longer(\n    cols = itemsprice_2018:totalprice_2020,\n    names_to = c(\"category\", \"year\"),\n    names_sep = \"_\", \n    values_to = \"value\", \n    names_transform = list(year = as.integer),\n    values_transform = list(value = as.character) \n  ) %>%\n  pivot_wider(\n    id_cols = c(customer_id, year),\n    names_from = category,\n    values_from = value\n  ) %>%\n  separate(\n    col = itemsprice,\n    into = c(\"items\", \"price_per_item\"),\n    sep = \" \", \n    remove = TRUE, \n    convert = TRUE\n  ) %>%\n  mutate(\n    price_per_item = stringr::str_replace_all(\n      string = price_per_item, \n      pattern = \"[()]\", \n      replacement = \"\"\n    )\n  ) %>%\n  type_convert(\n    trim_ws = TRUE\n  )\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n\n── Column specification ────────────────────────────────────────────────────────\ncols(\n  price_per_item = col_double(),\n  totalprice = col_double()\n)\n```\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}